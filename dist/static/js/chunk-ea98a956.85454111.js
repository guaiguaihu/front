(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ea98a956"],{1:function(e,t){},"1cc6":function(e,t,s){"use strict";var a=s("265f"),l=s.n(a);l.a},2:function(e,t){},"265f":function(e,t,s){},3:function(e,t){},"333d":function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[s("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},l=[];s("d4d5");Math.easeInOutQuad=function(e,t,s,a){return e/=a/2,e<1?s/2*e*e+t:(e--,-s/2*(e*(e-2)-1)+t)};var n=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function r(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function i(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function o(e,t,s){var a=i(),l=e-a,o=20,u=0;t="undefined"===typeof t?500:t;var c=function e(){u+=o;var i=Math.easeInOutQuad(u,a,l,t);r(i),u<t?n(e):s&&"function"===typeof s&&s()};c()}var u={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll&&o(0,800)},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll&&o(0,800)}}},c=u,d=(s("1cc6"),s("17cc")),m=Object(d["a"])(c,a,l,!1,null,"f3b72548",null);t["a"]=m.exports},"35e2":function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[s("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px"}},[s("el-row",{attrs:{type:"flex",justify:"start",gutter:10}},[s("el-col",{attrs:{xs:12,sm:12,md:12,lg:12,xl:12}},[s("el-form-item",{attrs:{label:"用车开始时间"}},[s("el-date-picker",{staticStyle:{width:"180px"},attrs:{type:"date","value-format":"yyyy-MM-dd"},model:{value:e.form.useBusStartDate,callback:function(t){e.$set(e.form,"useBusStartDate",t)},expression:"form.useBusStartDate"}}),e._v(" "),s("el-time-select",{staticStyle:{width:"150px"},attrs:{"picker-options":{start:"00:00",step:"00:15",end:"24:00"}},model:{value:e.form.useBusStartTime,callback:function(t){e.$set(e.form,"useBusStartTime",t)},expression:"form.useBusStartTime"}})],1)],1),e._v(" "),s("el-col",{attrs:{xs:12,sm:12,md:12,lg:12,xl:12}},[s("el-form-item",{attrs:{label:"用车结束时间"}},[s("el-date-picker",{staticStyle:{width:"180px"},attrs:{type:"date","value-format":"yyyy-MM-dd"},model:{value:e.form.useBusEndDate,callback:function(t){e.$set(e.form,"useBusEndDate",t)},expression:"form.useBusEndDate"}}),e._v(" "),s("el-time-select",{staticStyle:{width:"150px"},attrs:{"picker-options":{start:"00:00",step:"00:15",end:"24:00"}},model:{value:e.form.useBusEndTime,callback:function(t){e.$set(e.form,"useBusEndTime",t)},expression:"form.useBusEndTime"}})],1)],1)],1),e._v(" "),s("el-row",{attrs:{type:"flex",justify:"start",gutter:10}},[s("el-col",{attrs:{xs:12,sm:12,md:12,lg:12,xl:12}},[s("el-form-item",{attrs:{label:"用车单位"}},[s("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"请输入用车单位"},model:{value:e.form.useBusCom,callback:function(t){e.$set(e.form,"useBusCom",t)},expression:"form.useBusCom"}})],1)],1),e._v(" "),s("el-col",{attrs:{xs:12,sm:12,md:12,lg:12,xl:12}},[s("el-form-item",{attrs:{label:"用车单位联系人"}},[s("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"请输入用车单位联系人"},model:{value:e.form.useBusContact,callback:function(t){e.$set(e.form,"useBusContact",t)},expression:"form.useBusContact"}})],1)],1)],1),e._v(" "),s("el-row",{attrs:{type:"flex",justify:"start",gutter:10}},[s("el-col",{attrs:{xs:12,sm:12,md:12,lg:12,xl:12}},[s("el-form-item",{attrs:{label:"联系人手机号"}},[s("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"请输入用车单位联系人手机号"},model:{value:e.form.contactTel,callback:function(t){e.$set(e.form,"contactTel",t)},expression:"form.contactTel"}})],1)],1),e._v(" "),s("el-col",{attrs:{xs:12,sm:12,md:12,lg:12,xl:12}},[s("el-form-item",{attrs:{label:"行程"}},[s("el-input",{staticStyle:{width:"150px"},attrs:{type:"textarea",placeholder:"请输入行程"},model:{value:e.form.route,callback:function(t){e.$set(e.form,"route",t)},expression:"form.route"}})],1)],1)],1),e._v(" "),s("el-row",{attrs:{type:"flex",justify:"start"}},[s("el-col",{attrs:{xs:24,sm:24,md:24,lg:24,xl:24}},[s("el-form-item",{attrs:{label:"备注"}},[s("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"请输入备注",type:"textarea"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1),e._v(" "),s("el-col",{attrs:{xs:12,sm:12,md:12,lg:12,xl:12}},[s("el-form-item",{attrs:{label:"是否含费"}},[s("el-checkbox",{model:{value:e.form.containCost,callback:function(t){e.$set(e.form,"containCost",t)},expression:"form.containCost"}})],1)],1)],1),e._v(" "),s("el-row",{attrs:{type:"flex",justify:"center"}},[s("el-form-item",[s("el-button",{directives:[{name:"show",rawName:"v-show",value:!0,expression:"true"}],attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("预定")])],1)],1),e._v(" "),s("el-row",{attrs:{type:"flex",justify:"start",gutter:10}},[s("el-col",{attrs:{xs:12,sm:12,md:12,lg:12,xl:12}},[s("el-form-item",{attrs:{label:"上车点"}},[s("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"请输入上车点"},model:{value:e.form.addrGetOn,callback:function(t){e.$set(e.form,"addrGetOn",t)},expression:"form.addrGetOn"}})],1)],1),e._v(" "),s("el-col",{attrs:{xs:12,sm:12,md:12,lg:12,xl:12}},[s("el-form-item",{attrs:{label:"下车点"}},[s("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"请输入下车点"},model:{value:e.form.addrGetOff,callback:function(t){e.$set(e.form,"addrGetOff",t)},expression:"form.addrGetOff"}})],1)],1)],1),e._v(" "),s("el-dialog",{attrs:{title:"选择车辆",visible:e.dialogVisible,width:"80%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[s("bus-table",{attrs:{"is-select":!0,"show-bus-dialog":e.form.busList,"use-bus-start-time":e.selectStartTime,"use-bus-end-time":e.selectEndTime},on:{useBus:e.useBus}}),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("关 闭")])],1)],1),e._v(" "),s("el-button",{attrs:{type:"text"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("选择车辆")]),e._v(" "),s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.form.busList,border:"",fit:"","highlight-current-row":""}},[s("el-table-column",{attrs:{prop:"busNo",label:"车牌",width:"100"}}),e._v(" "),s("el-table-column",{attrs:{prop:"busModel",label:"车型",width:"100"}}),e._v(" "),s("el-table-column",{attrs:{prop:"driver",label:"驾驶员",width:"100"}}),e._v(" "),s("el-table-column",{attrs:{prop:"tel",label:"驾驶员手机",width:"180"}}),e._v(" "),s("el-table-column",{attrs:{prop:"busCost",label:"车费",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-input",{attrs:{size:"small"},model:{value:t.row.busCost,callback:function(s){e.$set(t.row,"busCost",s)},expression:"scope.row.busCost"}})]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"remark",label:"备注",width:"200"}}),e._v(" "),s("el-table-column",{attrs:{align:"center",label:"操作",width:"150","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(s){return e.handlerDeleteBusFromList(t.$index)}}},[e._v("\n                移除\n            ")])]}}])})],1),e._v(" "),s("el-row",{attrs:{type:"flex",justify:"start",gutter:10}},[s("el-col",{attrs:{xs:12,sm:12,md:12,lg:12,xl:12}},[s("el-form-item",{attrs:{label:"合同编号"}},[s("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"请输入合同编号"},model:{value:e.form.contractNo,callback:function(t){e.$set(e.form,"contractNo",t)},expression:"form.contractNo"}})],1)],1),e._v(" "),s("el-col",{attrs:{xs:12,sm:12,md:12,lg:12,xl:12}},[s("el-form-item",{attrs:{label:"付款方式"}},[s("el-select",{attrs:{placeholder:"请选择付款方式"},model:{value:e.form.payType,callback:function(t){e.$set(e.form,"payType",t)},expression:"form.payType"}},e._l(e.payTypes,function(e){return s("el-option",{key:e.key,attrs:{value:e.key,label:e.label}})}),1)],1)],1)],1),e._v(" "),s("el-row",{attrs:{type:"flex",justify:"start",gutter:10}},[s("el-col",{attrs:{xs:12,sm:12,md:12,lg:12,xl:12}},[s("el-form-item",{attrs:{label:"车价"}},[s("el-input",{staticStyle:{width:"150px"},attrs:{disabled:""},model:{value:e.form.contractAmount,callback:function(t){e.$set(e.form,"contractAmount",t)},expression:"form.contractAmount"}})],1)],1),e._v(" "),s("el-col",{attrs:{xs:12,sm:12,md:12,lg:12,xl:12}},[s("el-form-item",{attrs:{label:"预付金额"}},[s("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"请输入预付金额"},model:{value:e.form.preContractAmount,callback:function(t){e.$set(e.form,"preContractAmount",t)},expression:"form.preContractAmount"}})],1)],1)],1),e._v(" "),s("el-row",{attrs:{type:"flex",justify:"center"}},[s("el-form-item",[s("el-button",{directives:[{name:"show",rawName:"v-show",value:!0,expression:"true"}],attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("提交")])],1)],1)],1)],1)},l=[],n=(s("fb37"),s("f763"),s("b775"));function r(e){return Object(n["a"])({url:"/order",method:"post",data:e})}function i(e){return Object(n["a"])({url:"/order",method:"put",data:e})}function o(e){return Object(n["a"])({url:"/order/"+e,method:"get"})}var u=s("5570"),c=(s("7b04"),{name:"OrderForm",components:{BusTable:u["default"]},props:{isEdit:{type:Boolean,default:!1}},data:function(){return{form:{ordType:"1",payStatus:"",useBusStartDate:"",useBusEndDate:"",useBusStartTime:"",useBusEndTime:"",contractNo:"",contractAmount:5,preContractAmount:"",containCost:!1,busRequireId:"",addrGetOn:"",addrGetOff:"",payType:"1",remark:"",useBusCom:"",useBusContact:"",contactTel:"",route:"",busList:[]},ordTypes:[{label:"普通",key:"1"},{label:"外调",key:"2"}],payTypes:[{label:"挂账",key:"1"},{label:"现金",key:"2"}],dialogVisible:!1,selectStartTime:"",selectEndTime:""}},created:function(){if(this.isEdit){var e=this.$route.params&&this.$route.params.ordId;this.initOrder(e)}},watch:{form:{handler:function(e,t){var s=0;e.busList.forEach(function(e,t){var a=parseFloat(e.busCost);isNaN(a)||(s+=a)}),this.$set(this.form,"contractAmount",s),this.selectStartTime="",e.useBusStartDate&&(this.selectStartTime=e.useBusStartDate),e.useBusStartTime&&(this.selectStartTime+=" "+e.useBusStartTime),this.selectEndTime="",e.useBusEndDate&&(this.selectEndTime=e.useBusEndDate),e.useBusEndTime&&(this.selectEndTime+=" "+e.useBusEndTime),console.log("this.selectStartTime:"+this.selectStartTime),console.log("this.selectEndTime:"+this.selectEndTime)},deep:!0,immediate:!0}},methods:{changeSelectTime:function(e){this.selectStartTime=useBusStartDate+" "+useBusStartTime,this.selectEndTime=useBusEndDate+" "+useBusEndTime},onSubmit:function(){this.isEdit?this.onSubmitEditOrder():this.onSubmitAddOrder()},onSubmitAddOrder:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return!1;e.loading=!0,r(e.form).then(function(){e.$notify({title:"成功",message:"添加成功",type:"success",duration:2e3}),e.form.busList=[]}),e.loading=!1})},onSubmitEditOrder:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return!1;e.loading=!0,i(e.form).then(function(){e.$notify({title:"成功",message:"编辑成功",type:"success",duration:2e3})}),e.loading=!1})},initOrder:function(e){var t=this;o(e).then(function(e){t.form=e.data})},handleClose:function(e){e()},useBus:function(e){var t=!1;if(this.form.busList.forEach(function(s,a){if(e.busNo==s.busNo)return t=!0,!0}),!t){var s=Object.keys(this.form.busList).length;this.dialogVisible=!1;var a=this.$route.params&&this.$route.params.ordId;e.ordId=a,this.$set(e,"busCost",""),this.$set(this.form.busList,s,e)}},handlerDeleteBusFromList:function(e){this.$delete(this.form.busList,e)}}}),d=c,m=(s("83c4"),s("17cc")),f=Object(m["a"])(d,a,l,!1,null,"5f362feb",null);t["a"]=f.exports},4:function(e,t){},5570:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[s("div",{staticClass:"filter-container"},[s("el-input",{staticClass:"filter-item",staticStyle:{width:"100px"},attrs:{placeholder:"车牌"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleFilter(t)}},model:{value:e.listQuery.busNo,callback:function(t){e.$set(e.listQuery,"busNo",t)},expression:"listQuery.busNo"}}),e._v(" "),s("el-input",{staticClass:"filter-item",staticStyle:{width:"80px"},attrs:{placeholder:"车型"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleFilter(t)}},model:{value:e.listQuery.busModel,callback:function(t){e.$set(e.listQuery,"busModel",t)},expression:"listQuery.busModel"}}),e._v(" "),s("el-input",{staticClass:"filter-item",staticStyle:{width:"100px"},attrs:{placeholder:"驾驶员"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleFilter(t)}},model:{value:e.listQuery.driver,callback:function(t){e.$set(e.listQuery,"driver",t)},expression:"listQuery.driver"}}),e._v(" "),s("el-input",{staticClass:"filter-item",staticStyle:{width:"140px"},attrs:{placeholder:"驾驶员手机"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleFilter(t)}},model:{value:e.listQuery.tel,callback:function(t){e.$set(e.listQuery,"tel",t)},expression:"listQuery.tel"}}),e._v(" "),s("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v("\n      查询\n    ")]),e._v(" "),s("router-link",{attrs:{to:"/bus/addBus/"}},[s("el-button",{attrs:{type:"primary"}},[e._v("\n            添加\n          ")])],1),e._v(" "),s("el-button",{directives:[{name:"waves",rawName:"v-waves"},{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-download"},on:{click:e.handleDownload}},[e._v("\n      导出\n    ")])],1),e._v(" "),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[s("el-table-column",{attrs:{align:"center",label:"ID",width:"95"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.$index+1)+"\n      ")]}}])}),e._v(" "),s("el-table-column",{attrs:{align:"center",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-tag",[e._v(e._s(t.row.status))])]}}])}),e._v(" "),s("el-table-column",{attrs:{align:"center",label:"车牌"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.busNo)+"\n      ")]}}])}),e._v(" "),s("el-table-column",{attrs:{align:"center",label:"车型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.busModel)+"\n      ")]}}])}),e._v(" "),s("el-table-column",{attrs:{align:"center",label:"驾驶员"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.driver)+"\n      ")]}}])}),e._v(" "),s("el-table-column",{attrs:{align:"center",label:"驾驶员手机"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.tel)+"\n      ")]}}])}),e._v(" "),s("el-table-column",{attrs:{align:"center",label:"车辆来源"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("busSourceFilter")(t.row.busSource))+"\n      ")]}}])}),e._v(" "),s("el-table-column",{attrs:{align:"center",label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.remark)+"\n      ")]}}])}),e._v(" "),s("el-table-column",{attrs:{align:"center",label:"操作",width:"210","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("router-link",{directives:[{name:"show",rawName:"v-show",value:!e.isSelect,expression:"!isSelect"}],attrs:{to:"/bus/editBus/"+t.row.busId}},[s("el-button",{attrs:{type:"primary",size:"mini"}},[e._v("\n            编辑\n          ")])],1),e._v(" "),s("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.isSelect,expression:"!isSelect"}],attrs:{type:"primary",size:"mini"},on:{click:function(s){return e.handleCharge(t.row.busId)}}},[e._v("\n            记费\n        ")]),e._v(" "),s("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.isSelect,expression:"!isSelect"}],attrs:{type:"danger",size:"mini"},on:{click:function(s){return e.handlerDelete(t.row.busId)}}},[e._v("\n            删除\n        ")]),e._v(" "),s("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isSelect,expression:"isSelect"}],attrs:{type:"danger",size:"mini"},on:{click:function(s){return e.handlerSelect(t.row,t.$index)}}},[e._v("\n            选择\n        ")])]}}])})],1),e._v(" "),s("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.listQuery.page,limit:e.listQuery.limit},on:{"update:page":function(t){return e.$set(e.listQuery,"page",t)},"update:limit":function(t){return e.$set(e.listQuery,"limit",t)},pagination:e.fetchData}}),e._v(" "),s("el-dialog",{attrs:{title:"添加【车辆】费用",visible:e.dialogVisible,width:"50%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[s("cost-form",{attrs:{"bus-id":e.busId,model:e.costModel}}),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("关 闭")])],1)],1)],1)},l=[],n=s("b775");function r(e){return Object(n["a"])({url:"/bus/table/list",method:"get",params:e})}function i(e){return Object(n["a"])({url:"/bus/"+e,method:"delete"})}var o=s("333d"),u=s("6724"),c=s("c487"),d=[{label:"普通",key:"1"},{label:"外调",key:"2"}],m=d.reduce(function(e,t){return e[t.key]=t.label,e},{}),f={name:"BusTable",components:{Pagination:o["a"],CostForm:c["a"]},directives:{waves:u["a"]},props:{isSelect:{type:Boolean,default:!1},useBusStartTime:{type:String,default:""},useBusEndTime:{type:String,default:""},showBusDialog:{type:Array,default:null}},filters:{statusFilter:function(e){var t={published:"success",draft:"gray",deleted:"danger"};return t[e]},busSourceFilter:function(e){return m[e]}},data:function(){return{list:null,listLoading:!0,total:0,listQuery:{page:1,limit:50,busNo:"",busModel:"",useBusStartTime:this.useBusStartTime,useBusEndTime:this.useBusEndTime},driver:"",tel:"",dialogVisible:!1,busId:"",costModel:"bus"}},created:function(){this.fetchData()},methods:{fetchData:function(){var e=this;this.listLoading=!0,r(this.listQuery).then(function(t){e.list=t.data.items,e.listLoading=!1,e.total=t.data.total,console.log(e.list)})},handleFilter:function(){this.listQuery.page=1,this.fetchData()},handleDownload:function(){this.$message({message:"暂时还不提供下载功能",type:"warning"})},handlerDelete:function(e){var t=this;i(e).then(function(){t.$message({message:"删除成功",type:"success"})}),this.handleFilter()},handlerSelect:function(e,t){this.$delete(this.list,t),this.$emit("useBus",e)},handleCharge:function(e){this.dialogVisible=!0,this.busId=e},handleClose:function(e){e()}},watch:{useBusStartTime:function(e,t){this.listQuery.useBusStartTime=e,this.listQuery.useBusEndTime=this.useBusEndTime,this.fetchData()},useBusEndTime:function(e,t){this.listQuery.useBusStartTime=this.useBusStartTime,this.listQuery.useBusEndTime=e,this.fetchData()}}},p=f,h=s("17cc"),b=Object(h["a"])(p,a,l,!1,null,null,null);t["default"]=b.exports},5628:function(e,t,s){},6724:function(e,t,s){"use strict";s("8d41");var a="@@wavesContext";function l(e,t){function s(s){var a=Object.assign({},t.value),l=Object.assign({ele:e,type:"hit",color:"rgba(0, 0, 0, 0.15)"},a),n=l.ele;if(n){n.style.position="relative",n.style.overflow="hidden";var r=n.getBoundingClientRect(),i=n.querySelector(".waves-ripple");switch(i?i.className="waves-ripple":(i=document.createElement("span"),i.className="waves-ripple",i.style.height=i.style.width=Math.max(r.width,r.height)+"px",n.appendChild(i)),l.type){case"center":i.style.top=r.height/2-i.offsetHeight/2+"px",i.style.left=r.width/2-i.offsetWidth/2+"px";break;default:i.style.top=(s.pageY-r.top-i.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",i.style.left=(s.pageX-r.left-i.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return i.style.backgroundColor=l.color,i.className="waves-ripple z-active",!1}}return e[a]?e[a].removeHandle=s:e[a]={removeHandle:s},s}var n={bind:function(e,t){e.addEventListener("click",l(e,t),!1)},update:function(e,t){e.removeEventListener("click",e[a].removeHandle,!1),e.addEventListener("click",l(e,t),!1)},unbind:function(e){e.removeEventListener("click",e[a].removeHandle,!1),e[a]=null,delete e[a]}},r=function(e){e.directive("waves",n)};window.Vue&&(window.waves=n,Vue.use(r)),n.install=r;t["a"]=n},"83c4":function(e,t,s){"use strict";var a=s("949b"),l=s.n(a);l.a},"8a6e":function(e,t,s){"use strict";var a=s("5628"),l=s.n(a);l.a},"8d41":function(e,t,s){},"949b":function(e,t,s){},c487:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[s("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px"}},[s("el-form-item",{attrs:{label:"费用"}},[s("el-col",{attrs:{span:16}},[s("el-select",{model:{value:e.form.costName,callback:function(t){e.$set(e.form,"costName",t)},expression:"form.costName"}},e._l(e.costNames,function(e){return s("el-option",{key:e.key,attrs:{label:e.label,value:e.key}})}),1)],1)],1),e._v(" "),s("el-form-item",{attrs:{label:"金额"}},[s("el-col",{attrs:{span:16}},[s("el-input",{model:{value:e.form.costAmount,callback:function(t){e.$set(e.form,"costAmount",t)},expression:"form.costAmount"}})],1)],1),e._v(" "),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{label:"起始公里"}},[s("el-col",{attrs:{span:16}},[s("el-input",{model:{value:e.form.startKm,callback:function(t){e.$set(e.form,"startKm",t)},expression:"form.startKm"}})],1)],1),e._v(" "),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{label:"终点公里"}},[s("el-col",{attrs:{span:16}},[s("el-input",{model:{value:e.form.endKm,callback:function(t){e.$set(e.form,"endKm",t)},expression:"form.endKm"}})],1)],1),e._v(" "),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{label:"实驶公里"}},[s("el-col",{attrs:{span:16}},[s("span")])],1),e._v(" "),s("el-form-item",{attrs:{label:"备注"}},[s("el-col",{attrs:{span:16}},[s("el-input",{attrs:{type:"textarea"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.onSubmitAddCost}},[e._v("添加")])],1)],1)],1)},l=[],n=(s("d4d5"),s("b775"));function r(e){return Object(n["a"])({url:"/cost",method:"post",data:e})}var i={name:"CostForm",props:{busId:{type:Number,default:""},model:{type:String,default:"bus"}},data:function(){return{form:{costName:"",costAmount:"",remark:"",costRelatedId:this.busId,costRelatedModel:this.model,startKm:"",endKm:""},costNames:[{label:"过路费",key:"1"},{label:"停车费",key:"2"},{label:"住宿费",key:"3"},{label:"餐费",key:"4"},{label:"修理",key:"5"},{label:"罚款",key:"6"}]}},methods:{onSubmitAddCost:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return console.log("error add cost submit!!"),!1;e.loading=!0,r(e.form).then(function(){e.$notify({title:"成功",message:"添加成功",type:"success",duration:2e3})}),e.loading=!1})}}},o=i,u=(s("8a6e"),s("17cc")),c=Object(u["a"])(o,a,l,!1,null,"c6ef05e6",null);t["a"]=c.exports}}]);